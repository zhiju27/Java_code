Java虚拟机的内存可以分为三个区域：虚拟机栈stack、堆heap、方法区method area

虚拟机栈(栈)：
1. 执行中的方法。栈描述的是方法执行的内存模型。每个方法被调用都会创建一个栈帧(存储局部变量、操作数、方法出口等)
2. JVM为每个线程创建一个栈，用于存放该线程执行方法的信息(实际参数、局部参数等)
3. 栈属于线程私有，不能实现线程间共享
4. 栈的存储特性是“先进后出，后进先出“
5. 栈是由系统自动分配的，速度快，是连续的内存空间。

堆的特点：
1. 堆用于存储创建好的对象和数组(数组也是对象)
2. JVM只有一个堆，被所有线程共享
3. 堆是一个不连续的内存空间，分配灵活，速度慢
4. 堆被所有现场共享，在堆上的趋于，会被垃圾回收器做进一步划分，例如新生代、老年代的划分

方法区(也是堆)的特点：
1. 方法区是Java虚拟机规范，有不同的实现。
    i. JDK7以前是永久代
    ii.JDK部分去除永久代，静态变量、字符串常量池都挪到了堆内存中
    iii.JDK8是元数据空间和堆结合起来
2. JVM只有一个方法区，被所有线程共享
3. 方法区实际也是堆，只用于存储类，常量相关的信息
4. 用来存放程序中永远是不变或者唯一的内容。(类信息【Class对象】、静态变量、字符串常量等)
5. 常量池主要存放常量：如文本字符串、final常量值

垃圾回收机制：
把没用的对象从堆中释放掉
垃圾回收算法：
1. 引用计数法(缺点循环引用无法识别，例如A引用B，B引用A)
2. 引用可达法：程序把所有的引用关系看成一张图，从一个节点GC ROOT开始，寻找对应的引用节点，找到这个节点以后，
继续寻找这个节点的引用节点，当所有的引用节点寻找完毕后，剩余的节点则被认为是没有引用到的节点，即无用节点

通用分代垃圾回收机制：
1. Eden区满了就会触发Minor GC清理年轻代区域，清理无用对象，然后把有用对象复制到survivor1区
2. survivor区被复制超过15次的会放到年老代(Tenured区)，Major GC用于清理老年代区域
3. Full GC 用于清理年轻代、年老代、永久代区域、成本较高、会对系统性能产生影响

内存泄漏：
指堆内存由于某种原因程序未释放，造成内存浪费，导致运行速度减慢甚至系统崩溃等
1. 创建大量无用对象
2. 静态集合类的使用
3. 各种连接对象(IO流对象、数据库连接对象、网络连接对象)
4. 监听器的使用不当

程序员无权调用垃圾回收器
程序员可以调用System.gc()，该方法只是通知JVM，并非运行垃圾回收器。尽量少用，会申请启动Full GC，成本高，影像系统性能
Object对象的finalize方法，是Java提供给程序员用来释放对象或资源的方法，但是尽量少用。